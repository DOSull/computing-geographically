<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2024-01-13">
<meta name="description" content="I just remembered some important sources of inspiration for the book and wanted to acknowledge them">

<title>Computing Geographically Bonus Material - Thinking geographically</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../favicon.ico" rel="icon">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title"><em>Computing Geographically</em> Bonus Material</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-chapters" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Chapters</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-chapters">    
        <li>
    <a class="dropdown-item" href="../chapters/chap1/index.html" rel="" target="">
 <span class="dropdown-text">1. Building Bridges</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../chapters/chap2/index.html" rel="" target="">
 <span class="dropdown-text">2. Location and Space</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../chapters/chap3/index.html" rel="" target="">
 <span class="dropdown-text">3. Scale and Projection</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../chapters/chap4/index.html" rel="" target="">
 <span class="dropdown-text">4. Place and Meaning in Space</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../chapters/chap5/index.html" rel="" target="">
 <span class="dropdown-text">5. Lines and Areas</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../chapters/chap6/index.html" rel="" target="">
 <span class="dropdown-text">6. Relations, Networks, Flows</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../chapters/chap7/index.html" rel="" target="">
 <span class="dropdown-text">7. Time and Dynamics</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../chapters/chap8/index.html" rel="" target="">
 <span class="dropdown-text">8. Process and Pattern</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../chapters/chap9/index.html" rel="" target="">
 <span class="dropdown-text">9. Doing Giscience Doing Geography</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../the-figures/index.html" rel="" target="">
 <span class="menu-text">Figures</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../posts.html" rel="" target="">
 <span class="menu-text">Odds and ends</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../index-listing.html" rel="" target="">
 <span class="menu-text">All the pages</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#seeing-like-a" id="toc-seeing-like-a" class="nav-link active" data-scroll-target="#seeing-like-a">Seeing like a …</a></li>
  <li><a href="#tools-to-think-with" id="toc-tools-to-think-with" class="nav-link" data-scroll-target="#tools-to-think-with">Tools to think with</a></li>
  <li><a href="#from-thinking-geographically-to-computing-geographically" id="toc-from-thinking-geographically-to-computing-geographically" class="nav-link" data-scroll-target="#from-thinking-geographically-to-computing-geographically">From thinking geographically to <em>Computing Geographically</em></a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Thinking geographically</h1>
<p class="subtitle lead">Where ideas come from</p>
  <div class="quarto-categories">
    <div class="quarto-category">extras</div>
  </div>
  </div>

<div>
  <div class="description">
    I just remembered some important sources of inspiration for the book and wanted to acknowledge them
  </div>
</div>


<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">January 13, 2024</p>
    </div>
  </div>
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">January 23, 2024</p>
    </div>
  </div>
    
  </div>
  

</header>

<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Update History
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<table class="table">
<colgroup>
<col style="width: 14%">
<col style="width: 85%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Date</th>
<th style="text-align: left;">Changes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">2024-01-13</td>
<td style="text-align: left;">Initial post.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>I’m due to be on the <a href="https://gladpodcast.podbean.com/">Geography, Life, and Data (GLaD) podcast</a> and an obvious question I’ve been asked to think about is how I landed on the list of ‘big ideas’ that form the themes for the seven core chapters in the book. Doing so, I recalled an important source of inspiration that has somehow evaded mention in the book itself. One thought leads to another and I also recalled a couple of related notions—phrases as much as anything, although there is more to them than that—which also nudged me in the direction the book eventually took me.</p>
<p>Anyway, I thought since the book is almost upon us (I’m told by <a href="https://www.guilford.com/books/Computing-Geographically/David-O'Sullivan/9781462553938">Guilford</a> that 12 copies are on their way as I write) that I’d provide some insights on where itP came from.</p>
<section id="seeing-like-a" class="level2">
<h2 class="anchored" data-anchor-id="seeing-like-a">Seeing like a …</h2>
<p>James Scott’s <a href="https://yalebooks.yale.edu/book/9780300078152/seeing-like-a-state/"><em>Seeing Like a State</em></a><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> is … well, it’s one of those books the existence of which is an argument for the importance of books. Once read, it can’t be unread. The opening section on modern forestry instantly makes sense and gives the gist of the argument very quickly. It’s certainly possible to disagree with the idea that all attempts at centralisation are doomed to fail<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> as a they erase local knowledge and flatten out difference missing key details, oversimplifying, and landing us in all kinds of trouble via unintended consequences. Saying that, it’s hard to think of any scientific or technical advance that hasn’t led us at least some of the way down this well trodden path. It’s hard here not to detect echoes of Whithead’s “Fallacy of Misplaced Concreteness” (yup… he capitalised it) which is discussed in the context of process philosophies in my Chapter 8.</p>
<p>And that title! For a long time, I wanted to somehow make the title <em>Seeing Like a Geographer</em> work for this book, and <em>Seeing Geographically</em> was also in the running. Neither was a good fit for what the book actually became, however. I did once manage to crowbar the ‘Seeing…’ trope into the title of a graduate seminar ‘Seeing Geographically’ which as is noted in the preface was an important jumping off point for the book. The subtitle of Scott’s book is also pretty great: <em>How Certain Schemes to Improve the Human Condition Have Failed</em>. I wouldn’t go so far as to declare GIS ‘failed’, but I do think that as a platform it works hard to make us see the world in particular ways, and that we would do better to take a step back and allow ourselves to think (and see) geographically using computers in a wider variety of ways.</p>
<p>Which brings me to…</p>
</section>
<section id="tools-to-think-with" class="level2">
<h2 class="anchored" data-anchor-id="tools-to-think-with">Tools to think with</h2>
<p>This one is only a title, and a misremembered one at that. The actual title of Waddington’s book was <em>Tools for Thought</em><a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> I’ve never actually read this book, but reading <a href="https://blogs.nottingham.ac.uk/makingsciencepublic/2013/12/15/tools-for-thinking-about-an-increasingly-complex-world/">this blog post</a>, I probably should… it sounds great! I also note from its <a href="https://archive.org/details/toolsforthoughth0000wadd/page/n5/mode/2up">table of contents</a> an early section entitled ‘Things and Processes’ (again, see my Chapter 8).</p>
<p>For present purposes, more important than what is in Waddington’s book is my misremembrance of its title, which lodged in my brain as ‘tools to think with’. That’s a sufficiently generic phrase that I might also have encountered it somewhere else. Anyway… for me it’s how I’ve come to think about computers: as tools to think with. The whole tool/theory/thought thing doesn’t need rehearsing here. It is central to one of the more depressing exchanges about GIS in all of the geography literature,<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> which seems in retrospect to have closed down the early 90s rapprochment between ‘GISers’ and geography more widely, as Dawn Wright, Mike Goodchild, and Jim Proctor’s well-intentioned attempt to open up a conversation about GIS as ‘tool or science?’ was treated rather dismissively by John Pickles.</p>
<p>Anyway, ‘tools to think with’ is where my argument that the geographical representations we adopt when the computer we turn to is a GIS are limiting and potentially unhelpful. Further, when we adopt those representations the computer has already done a a lot of the important thinking for us. When we reiterate to students the importance of getting all the data layers into the same projected coordinate system, we’ve already assumed away many of the most interesting geographical questions we might ask!</p>
<p>What then would it mean to instead think geographically with computers?</p>
</section>
<section id="from-thinking-geographically-to-computing-geographically" class="level2">
<h2 class="anchored" data-anchor-id="from-thinking-geographically-to-computing-geographically">From thinking geographically to <em>Computing Geographically</em></h2>
<p>This is where Peter Jackson’s short paper ‘Thinking geographically’ <a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a> came in. My bibliographic database tells me I downloaded it in August 2013, which checks out. I was thinking then about what an ‘intro GIS/geospatial’ class ought to look like on a campus (Berkeley) where excellent courses already occupied that space as part of a GIS minor.</p>
<p>I came to two conclusions. First, such a class in 2013 (and a decade on the point is even clearer) should not be about GIS at all, but about web-based ‘geospatial stuff’.<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a> Second, it seemed to me then (and still) that such a course should start from how geographers think about the world, and how those ideas manifest (or perhaps don’t) in geospatial tools. This could provide a basis for more thoughtful approaches to ‘doing GIS’ (see Chapter 9).</p>
<p>From the idea of a course focused on geographical thinking it’s a very short internet search to Jackson’s ‘Thinking geographically’. Crucially (for the course and for the book) he asks</p>
<blockquote class="blockquote">
<p>But what concepts and theories would you choose as constituting the heart of our subject, contributing uniquely to our understanding of the world? (page 199)</p>
</blockquote>
<p>Jackson’s answer is a lot shorter than mine, but then his paper is 6 pages and the book is 300! The course that I developed ‘Digital Worlds’,<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a> also covers less ground than the book, although if I were still teaching it, I’d most certainly use the book for readings. For the record, Jackson’s key concepts (three of them pairs) are space and place, scale and connection, proximity and distance, and relational thinking. On reflection, it’s a little odd that ‘distance’ <em>per se</em> didn’t make it into <em>Computing Geographically</em>, but all the others are represented, and of course distance and proximity are implied.</p>
<p>Needless to say, arriving at the final list of concepts covered in the book was an iterative process. Space, place and scale were clearly never <em>not</em> going to make the cut. Some other concepts came and went, depending on how accessible, generalisable, and widely deployed they seem to me to be. The extent to which they have been, or could potentially be engaged in giscience, was also important as a book attempting to ‘bridge’ giscience and geography needs both sides to come to the party for the coverage to be useful and meaningful.</p>
<p>This has been a rather meandering post, but at least for me that’s how books emerge. After all, if the path from the general idea to the finished article was more linear, it wouldn’t be as hard, nor take as long to write them (see also <a href="../other-stuff/rosa-support-cat.html">Rosa, support cat</a>).</p>


</section>


<p>© 2023 David O’Sullivan</p><div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">References</h2>

<ol>
<li id="fn1"><p>Scott JC. 1998. <em>Seeing Like a State: How Certain Schemes to Improve the Human Condition Have Failed</em>. New Haven CT, Yale University Press.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>An entertaining read on the related socialist calculation debate is <a href="https://redplenty.com/">Francis Spufford’s <em>Red Plenty</em></a>. See also <a href="https://crookedtimber.org/wp-content/uploads/2012/07/RedPlenty.pdf">this</a>.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Waddington CH. 1977. <em>Tools for Thought: How to Understand and Apply the Latest Scientific Techniques of Problem Solving</em>. New York: Basic Books.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>See (and read in chronological order):</p>
<ul>
<li>Wright DJ, MF Goodchild and JD Proctor. 1997. <a href="https://dx.doi.org/10.1111/0004-5608.872057">Demystifying the persistent ambiguity of GIS as <code>tool’ versus</code>science’</a>. <em>Annals of the Association of American Geographers</em> <strong>87</strong>(2) 346–362.</li>
<li>Pickles J. 1997. <a href="https://dx.doi.org/10.1111/0004-5608.00058">Tool or science? GIS, technoscience and the theoretical turn</a>. <em>Annals of the Association of American Geographers</em> <strong>87</strong>(2) 363–372.</li>
<li>Wright DJ, MF Goodchild and JD Proctor. 1997. <a href="https://dx.doi.org/10.1111/0004-5608.00059">Reply: still hoping to turn that theoretical corner</a>. <em>Annals of the Association of American Geographers</em> <strong>87</strong>(2) 373.</li>
</ul>
<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></li>
<li id="fn5"><p>Jackson P. 2006. <a href="https://dx.doi.org/10.1080/00167487.2006.12094167">Thinking geographically</a>. <em>Geography</em> <strong>91</strong>(3) 199–204.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>For an official endorsement of that technical term, see Goodchild MF. 2015. <a href="https://www.esri.com/about/newsroom/arcwatch/four-thoughts-on-the-future-of-gis/">Four thoughts on the future of GIS</a>. <em>ArcWatch</em> (Feb).<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p>See <a href="https://southosullivan.com/geog80/">southosullivan.com/geog80/</a>.<a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>